# 记录一些开发经验

&nbsp;   
## 浅谈系统设计经验 - 2019.12

- 系统分析
  - 根据需求分析出功能
  - 根据功能来切割模块
  - 模块之间的交互
      - 黑箱
      - 一定程度上暴露细节
- 模块间分析
  - 首先分析上下游组件
      - 下层组件提供什么功能
      - 上层组件提出什么需求
  - 分析自身组件提供什么功能，如何提供
      - 设计向上层组件提供的功能语义，并根据**上层的 access pattern** 来 evaluate（*即在平坦抽象的基础上保证性能*）
          - 易使用性（*模块间交互比较平坦*）
          - 性能
      - 利用下层提供的功能来设计
          - 换位思考，自身组件是下层的上层，下层提供的语义是否匹配自身的 access pattern
- 模块内分析
  - 分析 **control flow** 和 **data flow**
  - 考虑并发场景
      - 识别重要IO路径，重要计算路径
      - 识别控制流的 convergence 和 divergence
      - 识别数据流的 dependency
      - 设计可扩展的 task，设计并发数据结构
  - 考虑故障场景
      - 甚至可能会影响控制流设计
  - 考虑熔断、服务降级
      - 影响整个系统的控制流设计

可以看出，在整个系统设计之初，可能需要大量的调研，来协调 **各个模块的功能职责** 和 **模块间的关系**。需要考虑：

- 整个系统的 control flow 和 data flow
- 模块间尽量交互平坦（即互相视为黑箱）
- 系统的瓶颈，可扩展性
- 模块间的交互是否平坦，是否会为了性能去破坏这些抽象；如果现在不考虑性能，以后呢，是否会导致重构，能否现在就设计出支持以后追求性能的可扩展的架构？


&nbsp;   
## 
